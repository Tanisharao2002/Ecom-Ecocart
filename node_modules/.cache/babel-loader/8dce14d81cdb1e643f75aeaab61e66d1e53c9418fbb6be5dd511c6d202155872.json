{"ast":null,"code":"var _jsxFileName = \"D:\\\\Programs\\\\React Projects\\\\ecocartecom\\\\src\\\\Component\\\\Search.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { getFirestore, collection, getDocs } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchFirebase = () => {\n  _s();\n  const [search, setSearch] = useState(\"\");\n  const [data, setData] = useState([]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [suggestions, setSuggestions] = useState([]);\n  const db = getFirestore();\n  useEffect(() => {\n    const fetchData = async () => {\n      const querySnapshot = await getDocs(collection(db, \"products\"));\n      const fetchedData = querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setData(fetchedData);\n      setFilteredData(fetchedData);\n    };\n    fetchData();\n  }, [db]);\n  useEffect(() => {\n    if (search.trim() === \"\") {\n      setSuggestions([]);\n      setFilteredData(data);\n    } else {\n      const searchLower = search.toLowerCase();\n      const results = data.flatMap(item => {\n        const {\n          name,\n          tags,\n          categories\n        } = item;\n        const matches = [];\n        if (name !== null && name !== void 0 && name.toLowerCase().includes(searchLower)) {\n          matches.push(name);\n        }\n        if (tags && Array.isArray(tags)) {\n          matches.push(...tags.filter(tag => tag.toLowerCase().includes(searchLower)));\n        }\n        if (categories && Array.isArray(categories)) {\n          matches.push(...categories.filter(category => category.toLowerCase().includes(searchLower)));\n        }\n        return matches;\n      }).filter((item, index, self) => self.indexOf(item) === index).slice(0, 10);\n      setSuggestions(results);\n      const filteredProducts = data.filter(item => {\n        const {\n          name,\n          tags,\n          categories\n        } = item;\n        const nameMatch = name === null || name === void 0 ? void 0 : name.toLowerCase().includes(searchLower);\n        const tagMatch = tags && tags.some(tag => tag.toLowerCase().includes(searchLower));\n        const categoryMatch = categories && categories.some(category => category.toLowerCase().includes(searchLower));\n        return nameMatch || tagMatch || categoryMatch;\n      });\n      setFilteredData(filteredProducts);\n    }\n  }, [search, data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\",\n      width: \"300px\",\n      margin: \"20px auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Search by name, tags, or categories...\",\n      value: search,\n      onChange: e => setSearch(e.target.value),\n      style: {\n        width: \"100%\",\n        padding: \"10px\",\n        borderRadius: \"4px\",\n        border: \"1px solid #ccc\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n      style: {\n        listStyleType: \"none\",\n        margin: 0,\n        padding: \"10px\",\n        border: \"1px solid #ccc\",\n        borderRadius: \"4px\",\n        position: \"absolute\",\n        width: \"100%\",\n        background: \"#fff\",\n        zIndex: 1000,\n        maxHeight: \"200px\",\n        overflowY: \"auto\"\n      },\n      children: suggestions.map((suggestion, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        onClick: () => {\n          setSearch(suggestion); // Set the clicked suggestion in the input\n          setSuggestions([]); // Clear the dropdown\n        },\n        style: {\n          padding: \"10px\",\n          cursor: \"pointer\",\n          borderBottom: \"1px solid #eee\"\n        },\n        children: suggestion\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"20px\"\n      },\n      children: filteredData.length > 0 ? filteredData.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: \"10px\",\n          marginBottom: \"10px\",\n          border: \"1px solid #ddd\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: product.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 15\n        }, this)]\n      }, product.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No products found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchFirebase, \"tF6eS/DQCUy/fiaQ/3I8n3SSSyg=\");\n_c = SearchFirebase;\nexport default SearchFirebase;\nvar _c;\n$RefreshReg$(_c, \"SearchFirebase\");","map":{"version":3,"names":["React","useState","useEffect","getFirestore","collection","getDocs","jsxDEV","_jsxDEV","SearchFirebase","_s","search","setSearch","data","setData","filteredData","setFilteredData","suggestions","setSuggestions","db","fetchData","querySnapshot","fetchedData","docs","map","doc","id","trim","searchLower","toLowerCase","results","flatMap","item","name","tags","categories","matches","includes","push","Array","isArray","filter","tag","category","index","self","indexOf","slice","filteredProducts","nameMatch","tagMatch","some","categoryMatch","style","position","width","margin","children","type","placeholder","value","onChange","e","target","padding","borderRadius","border","fileName","_jsxFileName","lineNumber","columnNumber","length","listStyleType","background","zIndex","maxHeight","overflowY","suggestion","onClick","cursor","borderBottom","marginTop","product","marginBottom","description","_c","$RefreshReg$"],"sources":["D:/Programs/React Projects/ecocartecom/src/Component/Search.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { getFirestore, collection, getDocs } from \"firebase/firestore\"; \r\n\r\nconst SearchFirebase = () => {\r\n  const [search, setSearch] = useState(\"\"); \r\n  const [data, setData] = useState([]); \r\n  const [filteredData, setFilteredData] = useState([]); \r\n  const [suggestions, setSuggestions] = useState([]); \r\n\r\n  const db = getFirestore();\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      const querySnapshot = await getDocs(collection(db, \"products\")); \r\n      const fetchedData = querySnapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n      setData(fetchedData);\r\n      setFilteredData(fetchedData); \r\n    };\r\n\r\n    fetchData();\r\n  }, [db]);\r\n\r\n  useEffect(() => {\r\n    if (search.trim() === \"\") {\r\n      setSuggestions([]); \r\n      setFilteredData(data); \r\n    } else {\r\n      const searchLower = search.toLowerCase();\r\n\r\n      const results = data\r\n        .flatMap((item) => {\r\n          const { name, tags, categories } = item;\r\n          const matches = [];\r\n\r\n          if (name?.toLowerCase().includes(searchLower)) {\r\n            matches.push(name);\r\n          }\r\n\r\n          if (tags && Array.isArray(tags)) {\r\n            matches.push(...tags.filter((tag) => tag.toLowerCase().includes(searchLower)));\r\n          }\r\n          if (categories && Array.isArray(categories)) {\r\n            matches.push(\r\n              ...categories.filter((category) =>\r\n                category.toLowerCase().includes(searchLower)\r\n              )\r\n            );\r\n          }\r\n\r\n          return matches;\r\n        })\r\n        .filter((item, index, self) => self.indexOf(item) === index) \r\n        .slice(0, 10); \r\n\r\n      setSuggestions(results);\r\n\r\n      const filteredProducts = data.filter((item) => {\r\n        const { name, tags, categories } = item;\r\n        const nameMatch = name?.toLowerCase().includes(searchLower);\r\n        const tagMatch = tags && tags.some((tag) => tag.toLowerCase().includes(searchLower));\r\n        const categoryMatch =\r\n          categories && categories.some((category) => category.toLowerCase().includes(searchLower));\r\n\r\n        return nameMatch || tagMatch || categoryMatch;\r\n      });\r\n\r\n      setFilteredData(filteredProducts);\r\n    }\r\n  }, [search, data]);\r\n\r\n  return (\r\n    <div style={{ position: \"relative\", width: \"300px\", margin: \"20px auto\" }}>\r\n  \r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Search by name, tags, or categories...\"\r\n        value={search}\r\n        onChange={(e) => setSearch(e.target.value)}\r\n        style={{\r\n          width: \"100%\",\r\n          padding: \"10px\",\r\n          borderRadius: \"4px\",\r\n          border: \"1px solid #ccc\",\r\n        }}\r\n      />\r\n\r\n      {/* Suggestions Dropdown */}\r\n      {suggestions.length > 0 && (\r\n        <ul\r\n          style={{\r\n            listStyleType: \"none\",\r\n            margin: 0,\r\n            padding: \"10px\",\r\n            border: \"1px solid #ccc\",\r\n            borderRadius: \"4px\",\r\n            position: \"absolute\",\r\n            width: \"100%\",\r\n            background: \"#fff\",\r\n            zIndex: 1000,\r\n            maxHeight: \"200px\",\r\n            overflowY: \"auto\",\r\n          }}\r\n        >\r\n          {suggestions.map((suggestion, index) => (\r\n            <li\r\n              key={index}\r\n              onClick={() => {\r\n                setSearch(suggestion); // Set the clicked suggestion in the input\r\n                setSuggestions([]); // Clear the dropdown\r\n              }}\r\n              style={{\r\n                padding: \"10px\",\r\n                cursor: \"pointer\",\r\n                borderBottom: \"1px solid #eee\",\r\n              }}\r\n            >\r\n              {suggestion}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n\r\n      {/* Display Filtered Products */}\r\n      <div style={{ marginTop: \"20px\" }}>\r\n        {filteredData.length > 0 ? (\r\n          filteredData.map((product) => (\r\n            <div key={product.id} style={{ padding: \"10px\", marginBottom: \"10px\", border: \"1px solid #ddd\" }}>\r\n              <h3>{product.name}</h3>\r\n              <p>{product.description}</p>\r\n              {/* You can display other product details like price, image, etc. */}\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <p>No products found</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchFirebase;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,YAAY,EAAEC,UAAU,EAAEC,OAAO,QAAQ,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvE,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACW,IAAI,EAAEC,OAAO,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACa,YAAY,EAAEC,eAAe,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACe,WAAW,EAAEC,cAAc,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAElD,MAAMiB,EAAE,GAAGf,YAAY,CAAC,CAAC;EACzBD,SAAS,CAAC,MAAM;IACd,MAAMiB,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,MAAMC,aAAa,GAAG,MAAMf,OAAO,CAACD,UAAU,CAACc,EAAE,EAAE,UAAU,CAAC,CAAC;MAC/D,MAAMG,WAAW,GAAGD,aAAa,CAACE,IAAI,CAACC,GAAG,CAAEC,GAAG,KAAM;QACnDC,EAAE,EAAED,GAAG,CAACC,EAAE;QACV,GAAGD,GAAG,CAACZ,IAAI,CAAC;MACd,CAAC,CAAC,CAAC;MACHC,OAAO,CAACQ,WAAW,CAAC;MACpBN,eAAe,CAACM,WAAW,CAAC;IAC9B,CAAC;IAEDF,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,CAACD,EAAE,CAAC,CAAC;EAERhB,SAAS,CAAC,MAAM;IACd,IAAIQ,MAAM,CAACgB,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;MACxBT,cAAc,CAAC,EAAE,CAAC;MAClBF,eAAe,CAACH,IAAI,CAAC;IACvB,CAAC,MAAM;MACL,MAAMe,WAAW,GAAGjB,MAAM,CAACkB,WAAW,CAAC,CAAC;MAExC,MAAMC,OAAO,GAAGjB,IAAI,CACjBkB,OAAO,CAAEC,IAAI,IAAK;QACjB,MAAM;UAAEC,IAAI;UAAEC,IAAI;UAAEC;QAAW,CAAC,GAAGH,IAAI;QACvC,MAAMI,OAAO,GAAG,EAAE;QAElB,IAAIH,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEJ,WAAW,CAAC,CAAC,CAACQ,QAAQ,CAACT,WAAW,CAAC,EAAE;UAC7CQ,OAAO,CAACE,IAAI,CAACL,IAAI,CAAC;QACpB;QAEA,IAAIC,IAAI,IAAIK,KAAK,CAACC,OAAO,CAACN,IAAI,CAAC,EAAE;UAC/BE,OAAO,CAACE,IAAI,CAAC,GAAGJ,IAAI,CAACO,MAAM,CAAEC,GAAG,IAAKA,GAAG,CAACb,WAAW,CAAC,CAAC,CAACQ,QAAQ,CAACT,WAAW,CAAC,CAAC,CAAC;QAChF;QACA,IAAIO,UAAU,IAAII,KAAK,CAACC,OAAO,CAACL,UAAU,CAAC,EAAE;UAC3CC,OAAO,CAACE,IAAI,CACV,GAAGH,UAAU,CAACM,MAAM,CAAEE,QAAQ,IAC5BA,QAAQ,CAACd,WAAW,CAAC,CAAC,CAACQ,QAAQ,CAACT,WAAW,CAC7C,CACF,CAAC;QACH;QAEA,OAAOQ,OAAO;MAChB,CAAC,CAAC,CACDK,MAAM,CAAC,CAACT,IAAI,EAAEY,KAAK,EAAEC,IAAI,KAAKA,IAAI,CAACC,OAAO,CAACd,IAAI,CAAC,KAAKY,KAAK,CAAC,CAC3DG,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;MAEf7B,cAAc,CAACY,OAAO,CAAC;MAEvB,MAAMkB,gBAAgB,GAAGnC,IAAI,CAAC4B,MAAM,CAAET,IAAI,IAAK;QAC7C,MAAM;UAAEC,IAAI;UAAEC,IAAI;UAAEC;QAAW,CAAC,GAAGH,IAAI;QACvC,MAAMiB,SAAS,GAAGhB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEJ,WAAW,CAAC,CAAC,CAACQ,QAAQ,CAACT,WAAW,CAAC;QAC3D,MAAMsB,QAAQ,GAAGhB,IAAI,IAAIA,IAAI,CAACiB,IAAI,CAAET,GAAG,IAAKA,GAAG,CAACb,WAAW,CAAC,CAAC,CAACQ,QAAQ,CAACT,WAAW,CAAC,CAAC;QACpF,MAAMwB,aAAa,GACjBjB,UAAU,IAAIA,UAAU,CAACgB,IAAI,CAAER,QAAQ,IAAKA,QAAQ,CAACd,WAAW,CAAC,CAAC,CAACQ,QAAQ,CAACT,WAAW,CAAC,CAAC;QAE3F,OAAOqB,SAAS,IAAIC,QAAQ,IAAIE,aAAa;MAC/C,CAAC,CAAC;MAEFpC,eAAe,CAACgC,gBAAgB,CAAC;IACnC;EACF,CAAC,EAAE,CAACrC,MAAM,EAAEE,IAAI,CAAC,CAAC;EAElB,oBACEL,OAAA;IAAK6C,KAAK,EAAE;MAAEC,QAAQ,EAAE,UAAU;MAAEC,KAAK,EAAE,OAAO;MAAEC,MAAM,EAAE;IAAY,CAAE;IAAAC,QAAA,gBAExEjD,OAAA;MACEkD,IAAI,EAAC,MAAM;MACXC,WAAW,EAAC,wCAAwC;MACpDC,KAAK,EAAEjD,MAAO;MACdkD,QAAQ,EAAGC,CAAC,IAAKlD,SAAS,CAACkD,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;MAC3CP,KAAK,EAAE;QACLE,KAAK,EAAE,MAAM;QACbS,OAAO,EAAE,MAAM;QACfC,YAAY,EAAE,KAAK;QACnBC,MAAM,EAAE;MACV;IAAE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAGDrD,WAAW,CAACsD,MAAM,GAAG,CAAC,iBACrB/D,OAAA;MACE6C,KAAK,EAAE;QACLmB,aAAa,EAAE,MAAM;QACrBhB,MAAM,EAAE,CAAC;QACTQ,OAAO,EAAE,MAAM;QACfE,MAAM,EAAE,gBAAgB;QACxBD,YAAY,EAAE,KAAK;QACnBX,QAAQ,EAAE,UAAU;QACpBC,KAAK,EAAE,MAAM;QACbkB,UAAU,EAAE,MAAM;QAClBC,MAAM,EAAE,IAAI;QACZC,SAAS,EAAE,OAAO;QAClBC,SAAS,EAAE;MACb,CAAE;MAAAnB,QAAA,EAEDxC,WAAW,CAACO,GAAG,CAAC,CAACqD,UAAU,EAAEjC,KAAK,kBACjCpC,OAAA;QAEEsE,OAAO,EAAEA,CAAA,KAAM;UACblE,SAAS,CAACiE,UAAU,CAAC,CAAC,CAAC;UACvB3D,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC;QACtB,CAAE;QACFmC,KAAK,EAAE;UACLW,OAAO,EAAE,MAAM;UACfe,MAAM,EAAE,SAAS;UACjBC,YAAY,EAAE;QAChB,CAAE;QAAAvB,QAAA,EAEDoB;MAAU,GAXNjC,KAAK;QAAAuB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAYR,CACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CACL,eAGD9D,OAAA;MAAK6C,KAAK,EAAE;QAAE4B,SAAS,EAAE;MAAO,CAAE;MAAAxB,QAAA,EAC/B1C,YAAY,CAACwD,MAAM,GAAG,CAAC,GACtBxD,YAAY,CAACS,GAAG,CAAE0D,OAAO,iBACvB1E,OAAA;QAAsB6C,KAAK,EAAE;UAAEW,OAAO,EAAE,MAAM;UAAEmB,YAAY,EAAE,MAAM;UAAEjB,MAAM,EAAE;QAAiB,CAAE;QAAAT,QAAA,gBAC/FjD,OAAA;UAAAiD,QAAA,EAAKyB,OAAO,CAACjD;QAAI;UAAAkC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACvB9D,OAAA;UAAAiD,QAAA,EAAIyB,OAAO,CAACE;QAAW;UAAAjB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA,GAFpBY,OAAO,CAACxD,EAAE;QAAAyC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAIf,CACN,CAAC,gBAEF9D,OAAA;QAAAiD,QAAA,EAAG;MAAiB;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG;IACxB;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC5D,EAAA,CAzIID,cAAc;AAAA4E,EAAA,GAAd5E,cAAc;AA2IpB,eAAeA,cAAc;AAAC,IAAA4E,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}